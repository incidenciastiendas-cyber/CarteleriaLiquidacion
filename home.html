<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home - Cartelería</title>
    <link rel="icon" type="image/png" href="fonts/gdnicon.png" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
    <link rel="stylesheet" href="home.css" />
  </head>
  <body>
    <div class="home-container">
      <header class="home-header">
        <div class="header-info">
          <div style="display: flex; align-items: center; gap: 15px">
            <div class="home-logo">
              <img
                src="fonts/gdnicon.png"
                alt="Logo"
                style="width: 35px; height: 35px"
              />
            </div>
            <div>
              <h1 style="margin: 0">
                <span
                  class="material-icons"
                  style="
                    font-size: 28px;
                    vertical-align: middle;
                    margin-right: 4px;
                  "
                  >store</span
                >
                Cartelería
              </h1>
              <p style="margin: 0">
                Sistema de generación de carteles para tiendas
              </p>
            </div>
          </div>
        </div>
        <div class="user-info">
          <div class="user-badge">
            <div class="user-icon" id="user-icon"></div>
            <span class="user-name" id="user-name">Usuario</span>
          </div>
          <button class="btn-logout" onclick="logout()">
            <span class="material-icons" style="font-size: 18px">logout</span>
            Salir
          </button>
        </div>
      </header>

      <div class="cards-container">
        <a href="liquidacion.html" class="card">
          <div class="card-icon">
            <span class="material-icons" style="font-size: 48px; color: #ffffff"
              >local_offer</span
            >
          </div>
          <h2 class="card-title">Cartelería de Liquidación</h2>
          <p class="card-description">
            Genera carteles A6 de rebaja en precio y obleas para productos en
            liquidación. Incluye código de barras, precios, fechas y toda la
            información necesaria.
          </p>
          <span class="card-arrow">
            Ir a Liquidación
            <span class="material-icons">arrow_forward</span>
          </span>
        </a>

        <a href="cenefas.html" class="card">
          <div class="card-icon">
            <span class="material-icons" style="font-size: 48px; color: #ffffff"
              >view_carousel</span
            >
          </div>
          <h2 class="card-title">Cenefas Promocionales</h2>
          <p class="card-description">
            Crea cenefas A5 horizontales para promociones especiales. Formato
            automático según tipo de oferta (2x1, 3x2, descuentos, cuotas, etc).
          </p>
          <span class="card-arrow">
            Ir a Cenefas
            <span class="material-icons">arrow_forward</span>
          </span>
        </a>
      </div>
    </div>

    <script src="users.js"></script>
    <script src="auth.js"></script>
    <script>
      // Proteger página
      requireAuth();

      // Función para obtener iniciales (Rodrigo Bernel -> RB)
      function getInitials(name) {
        const words = name.trim().split(/\s+/);
        if (words.length === 1) {
          return words[0].substring(0, 2).toUpperCase();
        }
        return (
          words[0].charAt(0) + words[words.length - 1].charAt(0)
        ).toUpperCase();
      }

      // Función para generar color consistente por hash
      function getAvatarColor(name) {
        const colors = [
          "#667eea",
          "#f093fb",
          "#4facfe",
          "#43e97b",
          "#feca57",
          "#ee5a6f",
        ];
        let hash = 0;
        for (let i = 0; i < name.length; i++) {
          hash = name.charCodeAt(i) + ((hash << 5) - hash);
        }
        return colors[Math.abs(hash) % colors.length];
      }

      // Mostrar información del usuario
      const user = getCurrentUser();
      if (user) {
        document.getElementById("user-name").textContent = user.name;
        const initials = getInitials(user.name);
        const userIcon = document.getElementById("user-icon");
        userIcon.textContent = initials;
        userIcon.style.backgroundColor = getAvatarColor(user.name);
      }
    </script>
  </body>
</html>
