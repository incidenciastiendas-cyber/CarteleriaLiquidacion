<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Cenefas Promocionales ‚Äî Previsualizador</title>
    <link rel="icon" type="image/png" href="fonts/gdnicon.png" />
    <link rel="stylesheet" href="cenefas-styles.css" />
  </head>
  <body>
    <div class="app">
      <header>
        <h1>Cenefas Promocionales</h1>
        <p class="muted">
          App para creaci√≥n de cenefas A5 horizontales para promociones (2x1,
          3x2, etc.)
        </p>
        <div style="display: flex; gap: 10px; align-items: center">
          <a href="index.html" class="btn-back">‚Üê Volver a Carteler√≠a</a>
          <button id="btn-ayuda" class="btn btn-info" style="padding: 8px 16px">
            ‚ùì ¬øC√≥mo usar?
          </button>
        </div>
      </header>

      <div class="controls">
        <div class="controls-group">
          <div class="file-input-wrapper">
            <label for="file-csv" class="btn btn-file"
              >üìÅ Seleccionar CSV</label
            >
            <input id="file-csv" type="file" accept=".csv" />
          </div>
          <button id="btn-import" class="btn btn-file">Importar CSV</button>
          <button id="btn-download-template" class="btn btn-info">
            üìÑ Descargar Template CSV
          </button>
        </div>
        <div class="controls-group">
          <button id="btn-add" class="btn btn-success">+ Agregar cenefa</button>
          <button id="btn-delete-selected" class="btn btn-danger">
            üóëÔ∏è Eliminar seleccionados
          </button>
        </div>
        <div class="controls-group">
          <button id="btn-preview" class="btn btn-primary">
            üìã Crear Cenefas
          </button>
          <button id="btn-download-selected" class="btn btn-success">
            üì• Descargar Seleccionadas
          </button>
          <button id="btn-print-all" class="btn btn-info">
            üìÑ Descargar Todo (PDF √∫nico)
          </button>
        </div>
      </div>

      <main>
        <section class="table-section">
          <table id="cenefas-table">
            <thead>
              <tr>
                <th><input id="select-all" type="checkbox" /></th>
                <th>C√≥digo Oferta</th>
                <th>Desc. Oferta</th>
                <th>Desde</th>
                <th>Hasta</th>
                <th>Objeto Oferta</th>
                <th>Aclar. Objeto</th>
                <th>Aclaraci√≥n</th>
                <th>Legal 1</th>
                <th>Legal 2</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="cenefas-body"></tbody>
          </table>
        </section>

        <section id="preview-section" class="preview-section hidden">
          <h2>Vista previa</h2>
          <div id="preview-list"></div>
        </section>
      </main>

      <!-- Modal de Ayuda -->
      <div id="modal-ayuda" class="modal-ayuda" style="display: none">
        <div class="modal-content-ayuda">
          <span class="close-ayuda">√ó</span>
          <h2>üìò Gu√≠a de Uso - Cenefas Promocionales</h2>

          <div class="ayuda-seccion">
            <h3>1Ô∏è‚É£ ¬øQu√© es una cenefa?</h3>
            <p>
              Una cenefa es un cartel promocional de formato A5 horizontal
              (595x420px) que se usa para mostrar ofertas especiales en las
              tiendas. El sistema genera autom√°ticamente 2 cenefas por hoja A4
              para imprimir.
            </p>
          </div>

          <div class="ayuda-seccion">
            <h3>2Ô∏è‚É£ Formas de cargar datos</h3>
            <h4>üìã Opci√≥n 1: Importar CSV (Recomendado)</h4>
            <ol>
              <li>Hac√© clic en <strong>"üìÑ Descargar Template CSV"</strong></li>
              <li>Abr√≠ el archivo descargado con Excel o Google Sheets</li>
              <li>Complet√° los datos siguiendo los ejemplos incluidos</li>
              <li>Guard√° el archivo como CSV</li>
              <li>
                Hac√© clic en <strong>"üìÅ Seleccionar CSV"</strong> y seleccion√°
                tu archivo
              </li>
              <li>Hac√© clic en <strong>"Importar CSV"</strong></li>
            </ol>

            <h4>‚úèÔ∏è Opci√≥n 2: Cargar manualmente</h4>
            <ol>
              <li>Hac√© clic en <strong>"+ Agregar cenefa"</strong></li>
              <li>Complet√° los campos en la tabla</li>
              <li>Pod√©s agregar m√∫ltiples cenefas repitiendo el proceso</li>
            </ol>
          </div>

          <div class="ayuda-seccion">
            <h3>3Ô∏è‚É£ C√≥digos de Oferta - Detecci√≥n Autom√°tica</h3>
            <p>
              <strong
                >El sistema detecta autom√°ticamente el tipo de oferta</strong
              >
              seg√∫n el c√≥digo que ingreses:
            </p>

            <table class="tabla-ejemplos">
              <tr>
                <th>C√≥digo</th>
                <th>Tipo</th>
                <th>Ejemplo Visual</th>
              </tr>
              <tr>
                <td><code>2x1</code>, <code>3x2</code></td>
                <td>Llev√° X Pag√° Y</td>
                <td>N√∫mero grande + x peque√±a + N√∫mero</td>
              </tr>
              <tr>
                <td><code>$3999</code></td>
                <td>Precio fijo</td>
                <td>$ peque√±o + N√∫mero grande</td>
              </tr>
              <tr>
                <td><code>40%</code></td>
                <td>Descuento simple</td>
                <td>N√∫mero grande + % peque√±o</td>
              </tr>
              <tr>
                <td><code>30%2</code></td>
                <td>Descuento 2da unidad</td>
                <td>N√∫mero + % arriba del texto</td>
              </tr>
              <tr>
                <td><code>6Q</code>, <code>12</code></td>
                <td>Cuotas sin inter√©s</td>
                <td>N√∫mero + "CUOTAS SIN INTER√âS"</td>
              </tr>
              <tr>
                <td><code>30%+4Q</code></td>
                <td>Descuento + Cuotas</td>
                <td>30% + 4 en fila superior, textos abajo</td>
              </tr>
            </table>
          </div>

          <div class="ayuda-seccion">
            <h3>4Ô∏è‚É£ Campos del Formulario</h3>
            <ul>
              <li>
                <strong>C√≥digo Oferta</strong> (obligatorio): 2x1, $3999, 40%,
                etc.
              </li>
              <li>
                <strong>Desc. Oferta</strong> (opcional): LLEV√Å 2 PAG√Å 1, DE
                DESCUENTO, etc.
              </li>
              <li>
                <strong>Desde/Hasta</strong>: Fechas de vigencia (formato:
                25/11)
              </li>
              <li><strong>Objeto Oferta</strong>: Descripci√≥n del producto</li>
              <li>
                <strong>Aclar. Objeto</strong> (opcional): Detalles adicionales
                del producto
              </li>
              <li>
                <strong>Aclaraci√≥n</strong> (opcional): Ej: "COMBINALO COMO
                QUIERAS"
              </li>
              <li>
                <strong>Legal 1 y 2</strong>: Textos legales al pie de la cenefa
              </li>
            </ul>
          </div>

          <div class="ayuda-seccion">
            <h3>5Ô∏è‚É£ Generar y Descargar</h3>
            <ol>
              <li>
                Una vez cargados los datos, hac√© clic en
                <strong>"üìã Crear Cenefas"</strong>
              </li>
              <li>Se mostrar√° la vista previa de todas las cenefas</li>
              <li>
                Pod√©s descargar:
                <ul>
                  <li>
                    <strong>Hoja A4 completa</strong> (2 cenefas por hoja)
                  </li>
                  <li><strong>Solo primera cenefa</strong> (individual)</li>
                  <li><strong>Todas las cenefas</strong> en un solo PDF</li>
                </ul>
              </li>
            </ol>
          </div>

          <div class="ayuda-seccion">
            <h3>‚úÖ Consejos √ötiles</h3>
            <ul>
              <li>
                ‚úÖ Descarg√° el template CSV para tener ejemplos de cada tipo
              </li>
              <li>‚úÖ Us√° la vista previa antes de descargar para verificar</li>
              <li>
                ‚úÖ Pod√©s eliminar cenefas seleccion√°ndolas y haciendo clic en
                "üóëÔ∏è Eliminar"
              </li>
              <li>
                ‚úÖ Los textos legales se ajustan autom√°ticamente al espacio
                disponible
              </li>
            </ul>
          </div>
        </div>
      </div>

      <footer>
        <small class="muted"
          >Creado por IncidenciasTiendas@gdnargentina.com</small
        >
      </footer>
    </div>

    <!-- Dependencias CDN -->
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="cenefas-app.js"></script>
  </body>
</html>
